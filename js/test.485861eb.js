(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["test"],{"13d5":function(t,s,e){"use strict";var i=e("23e7"),a=e("d58f").left,r=e("a640"),n=e("2d00"),o=e("605d"),u=!o&&n>79&&n<83,l=u||!r("reduce");i({target:"Array",proto:!0,forced:l},{reduce:function(t){var s=arguments.length;return a(this,t,s,s>1?arguments[1]:void 0)}})},"605d":function(t,s,e){"use strict";var i=e("da84"),a=e("c6b6");t.exports="process"===a(i.process)},"78c1":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"one_page_min_h bg_color p-5",attrs:{id:"test_page"}},[t._m(0),s("div",{staticClass:"is-flex is-align-items-center is-flex-direction-column",attrs:{id:"test_question"}},[s("div",{staticClass:"title is-3"},[t._v(t._s(t.tests.title))]),s("form",{staticClass:"w-100 is-flex is-align-items-center is-flex-direction-column",on:{submit:function(s){return s.preventDefault(),t.onSubmit.apply(null,arguments)}}},[s("div",{staticClass:"box_test_title is-size-5 mb-3"},[t._v(" 請根據下方題目的敘述，選擇最符合您情況的選項： ")]),s("div",{staticClass:"box_test p-6"},t._l(t.questions,(function(e,i){return s("div",{key:i,staticClass:"columns w-100"},[s("div",{staticClass:"column is-6"},[s("div",{staticClass:"is-flex"},[s("div",{staticClass:"is-size-18 is-1 mr-3"},[t._v(" "+t._s(i+1)+" ")]),s("div",{staticClass:"is-size-18 is-11"},[t._v(" "+t._s(t.questions[i].question)+" ")])])]),s("div",{staticClass:"column is-6 is-size-18"},t._l(t.questions[i].options,(function(e,a){return s("b-radio",{key:e._id,attrs:{"native-value":t.questions[i].options[a].optionScore,name:"q"+i},model:{value:t.modelQuestion[i],callback:function(s){t.$set(t.modelQuestion,i,t._n(s))},expression:"modelQuestion[index]"}},[t._v(" "+t._s(t.questions[i].options[a].option)+" ")])})),1)])})),0),s("button",{staticClass:"btn_enter btn_test_size mt-5",attrs:{type:"submit"}},[t._v("送出")])])])])},a=[function(){var t=this,s=t._self._c;return s("nav",{staticClass:"breadcrumb has-bullet-separator"},[s("ul",[s("li",[s("a",{attrs:{href:"#/"}},[t._v("首頁")])]),s("li",[s("a",{attrs:{href:"#/testList"}},[t._v("心理測驗")])]),s("li",{staticClass:"is-active"},[s("a",{attrs:{href:"#"}},[t._v("開始測驗")])])])])}],r=(e("13d5"),e("14d9"),{data(){return{testId:this.$route.params.id,tests:[],questions:[],modelQuestion:[],hasMobileCards:!0,scores:0,result:[]}},computed:{user(){return this.$store.state.user},hasValue(){return!Object.values(this.modelQuestion).includes(null)}},methods:{onSubmit(){for(let t=0;t<this.questions.length;t++)if(null==this.modelQuestion[t]){const s=t+1;this.$buefy.dialog.alert({title:"Opps!",message:"第"+s+"題尚未完成～",type:"is-danger",hasIcon:!0,icon:"alert-circle-outline"})}else"加總計分"===this.tests.scoringMethod?(this.scores+=this.modelQuestion[t],this.hasValue++):(this.result=this.modelQuestion.reduce((function(t,s){return s in t?t[s]++:t[s]=1,t}),{}),this.hasValue.push(2));this.hasValue&&this.axios.patch("https://vue-readyourmind.onrender.com/users/result/"+this.user.id,{testData_id:this.$route.params.id,date:Date.now(),scores:this.scores,result:this.result}).then(t=>{t.data.success?(this.$buefy.dialog.alert({title:"Success!",message:"去看結果吧～",type:"is-danger",hasIcon:!0,icon:"heart-circle"}),this.scores="",this.result=[],"/personal"!==this.$route.path&&this.$router.push("/personal?test="+this.$route.params.id)):this.$buefy.dialog.alert({title:"Error!",message:"發生錯誤！",type:"is-danger",hasIcon:!0,icon:"heart-broken"})}).catch(t=>{this.$buefy.dialog.alert({title:"Error!",message:t.response.data.message,type:"is-danger",hasIcon:!0,icon:"heart-circle"})})}},mounted(){this.axios.get("https://vue-readyourmind.onrender.com/tests/"+this.testId).then(t=>{if(t.data.success){this.tests=t.data.result,this.questions=t.data.result.questions;for(let t=0;t<this.questions.length;t++)this.modelQuestion.push(null)}else this.$buefy.dialog.alert({title:"Error!",message:t.data.message,type:"is-danger",hasIcon:!0,icon:"heart-broken"})}).catch(t=>{this.$buefy.dialog.alert({title:"Error!",message:t.response.data.message,type:"is-danger",hasIcon:!0,icon:"heart-broken"})})}}),n=r,o=e("2877"),u=Object(o["a"])(n,i,a,!1,null,null,null);s["default"]=u.exports},a640:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&i((function(){e.call(null,s||function(){return 1},1)}))}},d58f:function(t,s,e){"use strict";var i=e("59ed"),a=e("7b0b"),r=e("44ad"),n=e("07fa"),o=TypeError,u=function(t){return function(s,e,u,l){i(e);var c=a(s),d=r(c),h=n(c),f=t?h-1:0,p=t?-1:1;if(u<2)while(1){if(f in d){l=d[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw new o("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=p)f in d&&(l=e(l,d[f],f,c));return l}};t.exports={left:u(!1),right:u(!0)}}}]);
//# sourceMappingURL=test.485861eb.js.map